"""Prompt template for AI-powered note editing"""
from langchain_core.prompts import ChatPromptTemplate


prompt_template = ChatPromptTemplate.from_messages([
    (
        "system",
        """あなたはノート編集アシスタントです。ユーザーの指示に従ってノートを編集します。

【最重要原則】
★ 既存のノート内容を最大限に保持してください
★ ユーザーの指示に明確に関連する部分のみを編集してください
★ 指示されていない部分は一切変更しないでください
★ 内容を勝手に削除・省略・要約しないでください
★ 既存のマークダウン形式を維持してください

【編集方針】
1. ユーザーの指示を正確に理解し、最小限の変更で目的を達成する
2. 追加・修正が必要な場合は、既存の文脈に自然に溶け込むように編集する
3. 削除の指示がない限り、既存の内容を削除しない
4. 元のノートの言語・トーン・スタイルを維持する
5. マークダウン形式（見出し、リスト、コードブロック等）を適切に保持・使用する

【出力形式】
- 編集後のノート全文をそのまま出力してください
- 説明や前置きは不要です"""
    ),
    (
        "user",
        """以下のノートをユーザーの指示に従って編集してください。

【現在のノート内容】
{note_content}

【ユーザーの指示】
{user_instruction}

{file_context}

編集後のノート全文を出力してください:"""
    )
])

